<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a2e;
            color: #fff;
        }
        .card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        h1 {
            text-align: center;
            color: #e94560;
        }
        h2 {
            color: #ffd700;
            margin-top: 0;
        }
        .data-display {
            background: rgba(0, 0, 0, 0.5);
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            white-space: pre-wrap;
            word-wrap: break-word;
            max-height: 400px;
            overflow-y: auto;
            margin: 10px 0;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }
        .stat-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        .stat-value {
            font-size: 32px;
            font-weight: bold;
            color: #e94560;
        }
        .stat-label {
            font-size: 14px;
            opacity: 0.8;
            margin-top: 5px;
        }
        button {
            background: linear-gradient(135deg, #e94560 0%, #0f3460 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            margin: 5px;
            transition: transform 0.2s;
        }
        button:hover {
            transform: translateY(-2px);
        }
        .btn-success {
            background: linear-gradient(135deg, #00c896 0%, #00a078 100%);
        }
        .btn-warning {
            background: linear-gradient(135deg, #ffb800 0%, #d99c00 100%);
        }
        .btn-danger {
            background: linear-gradient(135deg, #f44336 0%, #e91e63 100%);
        }
        .controls {
            text-align: center;
            margin: 20px 0;
        }
        .empty {
            color: #888;
            font-style: italic;
        }
        .success {
            color: #00c896;
            font-weight: bold;
        }
        .error {
            color: #ff4655;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>ğŸ” ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«</h1>

    <div class="controls">
        <button onclick="checkStorage()">ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’ç¢ºèª</button>
        <button class="btn-success" onclick="migrateData()">ãƒ‡ãƒ¼ã‚¿ç§»è¡Œã‚’å®Ÿè¡Œ</button>
        <button class="btn-warning" onclick="createTestData()">ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ä½œæˆ</button>
        <button class="btn-danger" onclick="clearAll()">ã™ã¹ã¦ã‚¯ãƒªã‚¢</button>
    </div>

    <div class="card">
        <h2>ğŸ“Š ç¾åœ¨ã®çŠ¶æ…‹</h2>
        <div class="stats" id="stats-display"></div>
    </div>

    <div class="card">
        <h2>ğŸ—„ï¸ sf6_gallery ã®å†…å®¹</h2>
        <div class="data-display" id="sf6-data"></div>
    </div>

    <div class="card">
        <h2>ğŸ—„ï¸ valorant_gallery ã®å†…å®¹</h2>
        <div class="data-display" id="valorant-data"></div>
    </div>

    <div class="card">
        <h2>ğŸ—„ï¸ recentMatches ã®å†…å®¹</h2>
        <div class="data-display" id="recent-data"></div>
    </div>

    <div class="card">
        <h2>ğŸ”§ æ“ä½œãƒ­ã‚°</h2>
        <div class="data-display" id="log-display"></div>
    </div>

    <script>
        function log(message, type = 'info') {
            const logDisplay = document.getElementById('log-display');
            const timestamp = new Date().toLocaleTimeString('ja-JP');
            const icon = type === 'success' ? 'âœ…' : type === 'error' ? 'âŒ' : 'â„¹ï¸';
            const className = type === 'success' ? 'success' : type === 'error' ? 'error' : '';
            logDisplay.innerHTML += `<div class="${className}">[${timestamp}] ${icon} ${message}</div>`;
            logDisplay.scrollTop = logDisplay.scrollHeight;
        }

        function checkStorage() {
            log('ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒã‚§ãƒƒã‚¯é–‹å§‹...');

            const sf6Data = JSON.parse(localStorage.getItem('sf6_gallery') || '[]');
            const valorantData = JSON.parse(localStorage.getItem('valorant_gallery') || '[]');
            const recentData = JSON.parse(localStorage.getItem('recentMatches') || '[]');

            // çµ±è¨ˆè¡¨ç¤º
            const statsHTML = `
                <div class="stat-item">
                    <div class="stat-value">${sf6Data.length}</div>
                    <div class="stat-label">sf6_gallery</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">${valorantData.length}</div>
                    <div class="stat-label">valorant_gallery</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">${recentData.length}</div>
                    <div class="stat-label">recentMatches</div>
                </div>
            `;
            document.getElementById('stats-display').innerHTML = statsHTML;

            // ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º
            document.getElementById('sf6-data').textContent = 
                sf6Data.length > 0 ? JSON.stringify(sf6Data, null, 2) : 'âŒ ãƒ‡ãƒ¼ã‚¿ãªã—';
            
            document.getElementById('valorant-data').textContent = 
                valorantData.length > 0 ? JSON.stringify(valorantData, null, 2) : 'âŒ ãƒ‡ãƒ¼ã‚¿ãªã—';
            
            document.getElementById('recent-data').textContent = 
                recentData.length > 0 ? JSON.stringify(recentData, null, 2) : 'âŒ ãƒ‡ãƒ¼ã‚¿ãªã—';

            log(`sf6_gallery: ${sf6Data.length}ä»¶`, sf6Data.length > 0 ? 'success' : 'info');
            log(`valorant_gallery: ${valorantData.length}ä»¶`, valorantData.length > 0 ? 'success' : 'info');
            log(`recentMatches: ${recentData.length}ä»¶`, recentData.length > 0 ? 'success' : 'info');

            if (sf6Data.length === 0 && valorantData.length === 0 && recentData.length === 0) {
                log('ã™ã¹ã¦ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãŒç©ºã§ã™ï¼', 'error');
                log('ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã—ã¦ãã ã•ã„', 'info');
            }
        }

        function migrateData() {
            log('ãƒ‡ãƒ¼ã‚¿ç§»è¡Œã‚’é–‹å§‹...');

            const sf6Data = JSON.parse(localStorage.getItem('sf6_gallery') || '[]');
            const valorantData = JSON.parse(localStorage.getItem('valorant_gallery') || '[]');

            if (sf6Data.length === 0) {
                log('sf6_gallery ã«ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“', 'error');
                return;
            }

            // sf6_gallery ã®ãƒ‡ãƒ¼ã‚¿ã‚’ valorant_gallery ã«ãƒãƒ¼ã‚¸
            const mergedData = [...valorantData, ...sf6Data];

            // é‡è¤‡é™¤å»
            const uniqueData = Array.from(
                new Map(mergedData.map(item => [item.id, item])).values()
            );

            localStorage.setItem('valorant_gallery', JSON.stringify(uniqueData));
            log(`${sf6Data.length}ä»¶ã®ãƒ‡ãƒ¼ã‚¿ã‚’ valorant_gallery ã«ç§»è¡Œã—ã¾ã—ãŸ`, 'success');
            log(`é‡è¤‡é™¤å»å¾Œ: ${uniqueData.length}ä»¶`, 'info');

            checkStorage();
        }

        function createTestData() {
            log('ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆä¸­...');

            const testMatches = [
                {
                    id: 'test_' + Date.now() + '_1',
                    timestamp: new Date().toISOString(),
                    date: new Date().toLocaleDateString('ja-JP'),
                    playerCharacter: 'Luke',
                    character: 'Luke',
                    opponentCharacter: 'Ryu',
                    opponent: 'Ryu',
                    result: 'WIN',
                    score: '2-0',
                    roundsWon: 2,
                    roundsLost: 0,
                    decision: 'ko',
                    source: 'test',
                    insightTags: ['#ãƒ†ã‚¹ãƒˆ', '#ãƒ‡ãƒãƒƒã‚°'],
                    feelings: 'ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã§ã™'
                },
                {
                    id: 'test_' + Date.now() + '_2',
                    timestamp: new Date().toISOString(),
                    date: new Date().toLocaleDateString('ja-JP'),
                    playerCharacter: 'Ken',
                    character: 'Ken',
                    opponentCharacter: 'Chun-Li',
                    opponent: 'Chun-Li',
                    result: 'LOSS',
                    score: '0-2',
                    roundsWon: 0,
                    roundsLost: 2,
                    decision: 'timeout',
                    source: 'test',
                    insightTags: ['#ãƒ†ã‚¹ãƒˆ', '#ç·´ç¿’'],
                    feelings: 'ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿2'
                },
                {
                    id: 'test_' + Date.now() + '_3',
                    timestamp: new Date().toISOString(),
                    date: new Date().toLocaleDateString('ja-JP'),
                    playerCharacter: 'Juri',
                    character: 'Juri',
                    opponentCharacter: 'Cammy',
                    opponent: 'Cammy',
                    result: 'WIN',
                    score: '2-1',
                    roundsWon: 2,
                    roundsLost: 1,
                    decision: 'super',
                    source: 'test',
                    insightTags: ['#æ¥æˆ¦', '#å‹åˆ©'],
                    feelings: 'ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿3'
                }
            ];

            // valorant_gallery ã«ä¿å­˜
            localStorage.setItem('valorant_gallery', JSON.stringify(testMatches));
            
            // recentMatches ã«ã‚‚ä¿å­˜
            localStorage.setItem('recentMatches', JSON.stringify(testMatches));

            log(`${testMatches.length}ä»¶ã®ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã—ã¾ã—ãŸ`, 'success');
            checkStorage();
        }

        function clearAll() {
            if (confirm('ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                localStorage.removeItem('sf6_gallery');
                localStorage.removeItem('valorant_gallery');
                localStorage.removeItem('recentMatches');
                log('ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã—ãŸ', 'success');
                checkStorage();
            }
        }

        // åˆæœŸãƒã‚§ãƒƒã‚¯
        window.onload = function() {
            log('ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«ã‚’èµ·å‹•ã—ã¾ã—ãŸ');
            checkStorage();
        };
    </script>
</body>
</html>
