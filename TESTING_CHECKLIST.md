# 📸 まとめて入力機能 - テストチェックリスト

## ✅ 実装完了項目

- [x] `gemini-service.js`の`analyzeMatchImage`関数のプロンプト強化
  - 2種類のデータフォーマットに対応
  - ステップバイステップの詳細なガイド
  - 計算ロジックの明確化
  - エラー防止の強化

## 🧪 Pre-commit検証項目

### 1. コード品質チェック
- [ ] 構文エラーがないことを確認
- [ ] コンソールエラーがないことを確認
- [ ] 既存機能への影響がないことを確認

### 2. 機能テスト

#### テストケース1: 使用キャラクター別成績（形式A）
- [ ] 画像アップロード機能が動作する
- [ ] AIが正しくデータを抽出する
- [ ] 以下のデータが正確に抽出される:
  - [ ] ALL（総合成績）
  - [ ] LUKE (14勝/23戦, 60.87%)
  - [ ] JAMIE (0勝/0戦, 0.00%)
  - [ ] MANON (0勝/0戦, 0.00%)
  - [ ] 他のキャラクター

#### テストケース2: 対戦相手別成績（形式B）
- [ ] 画像アップロード機能が動作する
- [ ] AIが正しくデータを抽出する
- [ ] 以下のデータが正確に抽出される:
  - [ ] KIMBERLY (33戦, 54.55%)
  - [ ] ZANGIEF (33戦, 69.70%)
  - [ ] LILY (25戦, 76.00%)
  - [ ] GUILE (25戦, 52.00%)
  - [ ] JP (23戦, 47.83%)

### 3. エラーハンドリング
- [ ] 不正な画像ファイルでエラーが適切に処理される
- [ ] APIエラー時に適切なメッセージが表示される
- [ ] 画像認識失敗時のフォールバック処理が動作する

### 4. データ保存の検証
- [ ] 抽出データがギャラリーに正しく保存される
- [ ] ダッシュボードの統計が正しく更新される
- [ ] 「ALL」データが除外される（形式Aの場合）

### 5. UI/UX
- [ ] ローディング表示が適切に動作する
- [ ] プレビューが正しく表示される
- [ ] トーストメッセージが適切に表示される
- [ ] エラーメッセージが分かりやすい

## 🎯 テスト方法

### セットアップ
1. ローカルサーバーを起動
2. ブラウザで `http://localhost:PORT` を開く
3. API設定を完了させる

### テスト実行
1. 「試合データ入力」ページに移動
2. 「まとめて入力（スクリーンショット）」セクションを開く
3. 提供された画像をアップロード
   - `使用キャラクター別成績.png`
   - `対戦相手別成績.png`
4. 抽出結果を確認
5. データを保存
6. ダッシュボードとギャラリーで結果を確認

## 📊 期待される結果

### 使用キャラクター別成績.png
```json
{
  "matches": [
    {"character": "ALL", "totalMatches": 23, "winRate": 60.87, "wins": 14},
    {"character": "LUKE", "totalMatches": 23, "winRate": 60.87, "wins": 14},
    {"character": "JAMIE", "totalMatches": 0, "winRate": 0.00, "wins": 0},
    {"character": "MANON", "totalMatches": 0, "winRate": 0.00, "wins": 0},
    {"character": "KIMBERLY", "totalMatches": 0, "winRate": 0.00, "wins": 0},
    {"character": "MARISA", "totalMatches": 0, "winRate": 0.00, "wins": 0}
  ]
}
```

### 対戦相手別成績.png
```json
{
  "matches": [
    {"character": "KIMBERLY", "totalMatches": 33, "winRate": 54.55, "wins": 18},
    {"character": "ZANGIEF", "totalMatches": 33, "winRate": 69.70, "wins": 23},
    {"character": "LILY", "totalMatches": 25, "winRate": 76.00, "wins": 19},
    {"character": "GUILE", "totalMatches": 25, "winRate": 52.00, "wins": 13},
    {"character": "JP", "totalMatches": 23, "winRate": 47.83, "wins": 11}
  ]
}
```

## 🐛 発見されたバグ・課題
（テスト実行後に記入）

- [ ] バグ1: 
- [ ] バグ2: 
- [ ] 改善点1: 
- [ ] 改善点2: 

## 📝 レビュー観点

### コード品質
- [ ] プロンプトが読みやすく、構造化されている
- [ ] エラーハンドリングが適切
- [ ] コメントが適切に追加されている

### パフォーマンス
- [ ] 画像認識の応答時間が許容範囲内（< 10秒）
- [ ] メモリリークがない
- [ ] 大量データでも正常に動作する

### セキュリティ
- [ ] APIキーが適切に保護されている
- [ ] ユーザー入力の検証が適切
- [ ] XSS対策が実施されている

## ✅ 承認基準

以下の条件をすべて満たすこと:
- [ ] すべてのテストケースが成功
- [ ] 重大なバグが0件
- [ ] コードレビュー完了
- [ ] ドキュメント更新完了

---
**テスト実施者**: _________________
**実施日時**: _________________
**承認者**: _________________
**承認日時**: _________________
